export default {async fetch(request, env){const url=new URL(request.url);if(url.pathname==='/api/price'){const asin=url.searchParams.get('asin');if(!asin)return new Response('ASIN required',{status:400});const cacheKey=`price:${asin}`;const cached=await env.KV.get(cacheKey);if(cached)return new Response(cached,{headers:{'Content-Type':'application/json'}});const data={asin,price:'Consultar',availability:'Disponible',ts:Date.now()};await env.KV.put(cacheKey,JSON.stringify(data),{expirationTtl:21600});return new Response(JSON.stringify(data),{headers:{'Content-Type':'application/json'}});}return new Response('OK');}}